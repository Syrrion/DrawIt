<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw-it</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/game-ui.css">
    <link rel="stylesheet" href="css/tools.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/layers.css">
    <link rel="stylesheet" href="css/modals.css">
</head>
<body>
    <div id="app">
        <div id="local-cursor" class="custom-cursor hidden">
            <div id="cursor-brush-preview" class="cursor-brush-preview"></div>
            <div id="cursor-icon" class="cursor-icon"></div>
        </div>
        <div id="toast-container"></div>
        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="card">
                <div class="game-logo">
                    <div class="logo-icon">
                        <i class="fas fa-pencil-alt"></i>
                    </div>
                    <h1>Draw-it</h1>
                </div>
                
                <div class="login-content">
                    <div class="login-avatar-side">
                        <div class="avatar-section">
                            <h3>Crée ton Avatar</h3>
                            
                            <div class="avatar-tabs">
                                <button id="tab-emoji" class="tab-btn active">Emoji</button>
                                <button id="tab-draw" class="tab-btn">Dessin</button>
                                <button id="tab-upload" class="tab-btn">Image</button>
                            </div>

                            <div id="avatar-preview-container">
                                <div id="avatar-preview" class="avatar">
                                    <span id="avatar-emoji">🎨</span>
                                </div>
                                <canvas id="avatar-canvas" width="100" height="100" class="avatar hidden"></canvas>
                            </div>

                            <div id="mode-emoji" class="avatar-mode-content">
                                <div class="controls">
                                    <div class="control-row">
                                        <label>Couleur:</label>
                                        <div class="color-trigger" id="emoji-color-trigger">
                                            <div id="emoji-color-preview" style="background-color: #3498db;"></div>
                                        </div>
                                    </div>
                                    <div class="control-row">
                                        <label>Emoji:</label>
                                        <div style="display: flex; gap: 10px; align-items: center;">
                                            <div class="emoji-picker-wrapper" id="emoji-picker-wrapper">
                                                <div class="emoji-picker-trigger" id="emoji-picker-trigger">
                                                    <span class="current-emoji">🎨</span>
                                                    <i class="fas fa-chevron-down"></i>
                                                </div>
                                                <div class="emoji-options hidden" id="emoji-options">
                                                    <!-- Visages -->
                                                    <div class="emoji-category-header">Visages</div>
                                                    <div class="emoji-option selected" data-value="🎨">🎨</div>
                                                    <div class="emoji-option" data-value="😀">😀</div>
                                                    <div class="emoji-option" data-value="😎">😎</div>
                                                    <div class="emoji-option" data-value="🥳">🥳</div>
                                                    <div class="emoji-option" data-value="🤯">🤯</div>
                                                    <div class="emoji-option" data-value="🥶">🥶</div>
                                                    <div class="emoji-option" data-value="🤠">🤠</div>
                                                    <div class="emoji-option" data-value="🤡">🤡</div>
                                                    <div class="emoji-option" data-value="👻">👻</div>
                                                    <div class="emoji-option" data-value="👽">👽</div>
                                                    <div class="emoji-option" data-value="🤖">🤖</div>
                                                    <div class="emoji-option" data-value="💩">💩</div>
                                                    <div class="emoji-option" data-value="👺">👺</div>
                                                    <div class="emoji-option" data-value="👹">👹</div>
                                                    <div class="emoji-option" data-value="👿">👿</div>
                                                    <div class="emoji-option" data-value="💀">💀</div>
                                                    <div class="emoji-option" data-value="😷">😷</div>
                                                    <div class="emoji-option" data-value="🤒">🤒</div>
                                                    <div class="emoji-option" data-value="🤕">🤕</div>
                                                    <div class="emoji-option" data-value="🤢">🤢</div>
                                                    <div class="emoji-option" data-value="🤮">🤮</div>
                                                    <div class="emoji-option" data-value="🤧">🤧</div>
                                                    <div class="emoji-option" data-value="🥵">🥵</div>
                                                    <div class="emoji-option" data-value="🥶">🥶</div>
                                                    <div class="emoji-option" data-value="🥴">🥴</div>
                                                    <div class="emoji-option" data-value="😵">😵</div>
                                                    <div class="emoji-option" data-value="🤯">🤯</div>
                                                    <div class="emoji-option" data-value="🤠">🤠</div>
                                                    <div class="emoji-option" data-value="🥳">🥳</div>
                                                    <div class="emoji-option" data-value="😎">😎</div>
                                                    <div class="emoji-option" data-value="🤓">🤓</div>
                                                    <div class="emoji-option" data-value="🧐">🧐</div>
                                                    <div class="emoji-option" data-value="😕">😕</div>
                                                    <div class="emoji-option" data-value="😟">😟</div>
                                                    <div class="emoji-option" data-value="🙁">🙁</div>
                                                    <div class="emoji-option" data-value="😮">😮</div>
                                                    <div class="emoji-option" data-value="😯">😯</div>
                                                    <div class="emoji-option" data-value="😲">😲</div>
                                                    <div class="emoji-option" data-value="😳">😳</div>
                                                    <div class="emoji-option" data-value="🥺">🥺</div>
                                                    <div class="emoji-option" data-value="😦">😦</div>
                                                    <div class="emoji-option" data-value="😧">😧</div>
                                                    <div class="emoji-option" data-value="😨">😨</div>
                                                    <div class="emoji-option" data-value="😰">😰</div>
                                                    <div class="emoji-option" data-value="😥">😥</div>
                                                    <div class="emoji-option" data-value="😢">😢</div>
                                                    <div class="emoji-option" data-value="😭">😭</div>
                                                    <div class="emoji-option" data-value="😱">😱</div>
                                                    <div class="emoji-option" data-value="😖">😖</div>
                                                    <div class="emoji-option" data-value="😣">😣</div>
                                                    <div class="emoji-option" data-value="😞">😞</div>
                                                    <div class="emoji-option" data-value="😓">😓</div>
                                                    <div class="emoji-option" data-value="😩">😩</div>
                                                    <div class="emoji-option" data-value="😫">😫</div>
                                                    <div class="emoji-option" data-value="🥱">🥱</div>
                                                    <div class="emoji-option" data-value="😤">😤</div>
                                                    <div class="emoji-option" data-value="😡">😡</div>
                                                    <div class="emoji-option" data-value="😠">😠</div>
                                                    <div class="emoji-option" data-value="🤬">🤬</div>
                                                    <div class="emoji-option" data-value="😈">😈</div>
                                                    <div class="emoji-option" data-value="👿">👿</div>
                                                    <div class="emoji-option" data-value="💀">💀</div>
                                                    <div class="emoji-option" data-value="☠">☠</div>

                                                    <!-- Animaux -->
                                                    <div class="emoji-category-header">Animaux</div>
                                                    <div class="emoji-option" data-value="🐶">🐶</div>
                                                    <div class="emoji-option" data-value="🐱">🐱</div>
                                                    <div class="emoji-option" data-value="🐭">🐭</div>
                                                    <div class="emoji-option" data-value="🐹">🐹</div>
                                                    <div class="emoji-option" data-value="🐰">🐰</div>
                                                    <div class="emoji-option" data-value="🦊">🦊</div>
                                                    <div class="emoji-option" data-value="🐻">🐻</div>
                                                    <div class="emoji-option" data-value="🐼">🐼</div>
                                                    <div class="emoji-option" data-value="🐨">🐨</div>
                                                    <div class="emoji-option" data-value="🐯">🐯</div>
                                                    <div class="emoji-option" data-value="🦁">🦁</div>
                                                    <div class="emoji-option" data-value="🐮">🐮</div>
                                                    <div class="emoji-option" data-value="🐷">🐷</div>
                                                    <div class="emoji-option" data-value="🐸">🐸</div>
                                                    <div class="emoji-option" data-value="🐵">🐵</div>
                                                    <div class="emoji-option" data-value="🐔">🐔</div>
                                                    <div class="emoji-option" data-value="🐧">🐧</div>
                                                    <div class="emoji-option" data-value="🐦">🐦</div>
                                                    <div class="emoji-option" data-value="🐤">🐤</div>
                                                    <div class="emoji-option" data-value="🦆">🦆</div>
                                                    <div class="emoji-option" data-value="🦅">🦅</div>
                                                    <div class="emoji-option" data-value="🦉">🦉</div>
                                                    <div class="emoji-option" data-value="🦇">🦇</div>
                                                    <div class="emoji-option" data-value="🐺">🐺</div>
                                                    <div class="emoji-option" data-value="🐗">🐗</div>
                                                    <div class="emoji-option" data-value="🐴">🐴</div>
                                                    <div class="emoji-option" data-value="🦄">🦄</div>
                                                    <div class="emoji-option" data-value="🐝">🐝</div>
                                                    <div class="emoji-option" data-value="🐛">🐛</div>
                                                    <div class="emoji-option" data-value="🦋">🦋</div>
                                                    <div class="emoji-option" data-value="🐌">🐌</div>
                                                    <div class="emoji-option" data-value="🐞">🐞</div>
                                                    <div class="emoji-option" data-value="🐜">🐜</div>
                                                    <div class="emoji-option" data-value="🦟">🦟</div>
                                                    <div class="emoji-option" data-value="🦗">🦗</div>
                                                    <div class="emoji-option" data-value="🕷">🕷</div>
                                                    <div class="emoji-option" data-value="🦂">🦂</div>
                                                    <div class="emoji-option" data-value="🐢">🐢</div>
                                                    <div class="emoji-option" data-value="🐍">🐍</div>
                                                    <div class="emoji-option" data-value="🦎">🦎</div>
                                                    <div class="emoji-option" data-value="🦖">🦖</div>
                                                    <div class="emoji-option" data-value="🦕">🦕</div>
                                                    <div class="emoji-option" data-value="🐙">🐙</div>
                                                    <div class="emoji-option" data-value="🦑">🦑</div>
                                                    <div class="emoji-option" data-value="🦐">🦐</div>
                                                    <div class="emoji-option" data-value="🦞">🦞</div>
                                                    <div class="emoji-option" data-value="🦀">🦀</div>
                                                    <div class="emoji-option" data-value="🐡">🐡</div>
                                                    <div class="emoji-option" data-value="🐠">🐠</div>
                                                    <div class="emoji-option" data-value="🐟">🐟</div>
                                                    <div class="emoji-option" data-value="🐬">🐬</div>
                                                    <div class="emoji-option" data-value="🐳">🐳</div>
                                                    <div class="emoji-option" data-value="🐋">🐋</div>
                                                    <div class="emoji-option" data-value="🦈">🦈</div>
                                                    <div class="emoji-option" data-value="🐊">🐊</div>
                                                    <div class="emoji-option" data-value="🐅">🐅</div>
                                                    <div class="emoji-option" data-value="🐆">🐆</div>
                                                    <div class="emoji-option" data-value="🦓">🦓</div>
                                                    <div class="emoji-option" data-value="🦍">🦍</div>
                                                    <div class="emoji-option" data-value="🦧">🦧</div>
                                                    <div class="emoji-option" data-value="🐘">🐘</div>
                                                    <div class="emoji-option" data-value="🦛">🦛</div>
                                                    <div class="emoji-option" data-value="🦏">🦏</div>
                                                    <div class="emoji-option" data-value="🐪">🐪</div>
                                                    <div class="emoji-option" data-value="🐫">🐫</div>
                                                    <div class="emoji-option" data-value="🦒">🦒</div>
                                                    <div class="emoji-option" data-value="🦘">🦘</div>
                                                    <div class="emoji-option" data-value="🐃">🐃</div>
                                                    <div class="emoji-option" data-value="🐂">🐂</div>
                                                    <div class="emoji-option" data-value="🐄">🐄</div>
                                                    <div class="emoji-option" data-value="🐎">🐎</div>
                                                    <div class="emoji-option" data-value="🐖">🐖</div>
                                                    <div class="emoji-option" data-value="🐏">🐏</div>
                                                    <div class="emoji-option" data-value="🐑">🐑</div>
                                                    <div class="emoji-option" data-value="🦙">🦙</div>
                                                    <div class="emoji-option" data-value="🐐">🐐</div>
                                                    <div class="emoji-option" data-value="🦌">🦌</div>
                                                    <div class="emoji-option" data-value="🐕">🐕</div>
                                                    <div class="emoji-option" data-value="🐩">🐩</div>
                                                    <div class="emoji-option" data-value="🦮">🦮</div>
                                                    <div class="emoji-option" data-value="🐕‍🦺">🐕‍🦺</div>
                                                    <div class="emoji-option" data-value="🐈">🐈</div>
                                                    <div class="emoji-option" data-value="🐓">🐓</div>
                                                    <div class="emoji-option" data-value="🦃">🦃</div>
                                                    <div class="emoji-option" data-value="🦚">🦚</div>
                                                    <div class="emoji-option" data-value="🦜">🦜</div>
                                                    <div class="emoji-option" data-value="🦢">🦢</div>
                                                    <div class="emoji-option" data-value="🦩">🦩</div>
                                                    <div class="emoji-option" data-value="🕊">🕊</div>
                                                    <div class="emoji-option" data-value="🐇">🐇</div>
                                                    <div class="emoji-option" data-value="🦝">🦝</div>
                                                    <div class="emoji-option" data-value="🦨">🦨</div>
                                                    <div class="emoji-option" data-value="🦡">🦡</div>
                                                    <div class="emoji-option" data-value="🦦">🦦</div>
                                                    <div class="emoji-option" data-value="🦥">🦥</div>
                                                    <div class="emoji-option" data-value="🐁">🐁</div>
                                                    <div class="emoji-option" data-value="🐀">🐀</div>
                                                    <div class="emoji-option" data-value="🐿">🐿</div>
                                                    <div class="emoji-option" data-value="🦔">🦔</div>
                                                    <div class="emoji-option" data-value="🐉">🐉</div>
                                                    <div class="emoji-option" data-value="🐲">🐲</div>

                                                    <!-- Nourriture -->
                                                    <div class="emoji-category-header">Nourriture</div>
                                                    <div class="emoji-option" data-value="🍏">🍏</div>
                                                    <div class="emoji-option" data-value="🍎">🍎</div>
                                                    <div class="emoji-option" data-value="🍐">🍐</div>
                                                    <div class="emoji-option" data-value="🍊">🍊</div>
                                                    <div class="emoji-option" data-value="🍋">🍋</div>
                                                    <div class="emoji-option" data-value="🍌">🍌</div>
                                                    <div class="emoji-option" data-value="🍉">🍉</div>
                                                    <div class="emoji-option" data-value="🍇">🍇</div>
                                                    <div class="emoji-option" data-value="🍓">🍓</div>
                                                    <div class="emoji-option" data-value="🍈">🍈</div>
                                                    <div class="emoji-option" data-value="🍒">🍒</div>
                                                    <div class="emoji-option" data-value="🍑">🍑</div>
                                                    <div class="emoji-option" data-value="🥭">🥭</div>
                                                    <div class="emoji-option" data-value="🍍">🍍</div>
                                                    <div class="emoji-option" data-value="🥥">🥥</div>
                                                    <div class="emoji-option" data-value="🥝">🥝</div>
                                                    <div class="emoji-option" data-value="🍅">🍅</div>
                                                    <div class="emoji-option" data-value="🍆">🍆</div>
                                                    <div class="emoji-option" data-value="🥑">🥑</div>
                                                    <div class="emoji-option" data-value="🥦">🥦</div>
                                                    <div class="emoji-option" data-value="🥬">🥬</div>
                                                    <div class="emoji-option" data-value="🥒">🥒</div>
                                                    <div class="emoji-option" data-value="🌶">🌶</div>
                                                    <div class="emoji-option" data-value="🌽">🌽</div>
                                                    <div class="emoji-option" data-value="🥕">🥕</div>
                                                    <div class="emoji-option" data-value="🧄">🧄</div>
                                                    <div class="emoji-option" data-value="🧅">🧅</div>
                                                    <div class="emoji-option" data-value="🥔">🥔</div>
                                                    <div class="emoji-option" data-value="🍠">🍠</div>
                                                    <div class="emoji-option" data-value="🥐">🥐</div>
                                                    <div class="emoji-option" data-value="🥯">🥯</div>
                                                    <div class="emoji-option" data-value="🍞">🍞</div>
                                                    <div class="emoji-option" data-value="🥖">🥖</div>
                                                    <div class="emoji-option" data-value="🥨">🥨</div>
                                                    <div class="emoji-option" data-value="🧀">🧀</div>
                                                    <div class="emoji-option" data-value="🥚">🥚</div>
                                                    <div class="emoji-option" data-value="🍳">🍳</div>
                                                    <div class="emoji-option" data-value="🧈">🧈</div>
                                                    <div class="emoji-option" data-value="🥞">🥞</div>
                                                    <div class="emoji-option" data-value="🧇">🧇</div>
                                                    <div class="emoji-option" data-value="🥓">🥓</div>
                                                    <div class="emoji-option" data-value="🥩">🥩</div>
                                                    <div class="emoji-option" data-value="🍗">🍗</div>
                                                    <div class="emoji-option" data-value="🍖">🍖</div>
                                                    <div class="emoji-option" data-value="🦴">🦴</div>
                                                    <div class="emoji-option" data-value="🌭">🌭</div>
                                                    <div class="emoji-option" data-value="🍔">🍔</div>
                                                    <div class="emoji-option" data-value="🍟">🍟</div>
                                                    <div class="emoji-option" data-value="🍕">🍕</div>
                                                    <div class="emoji-option" data-value="🥪">🥪</div>
                                                    <div class="emoji-option" data-value="🥙">🥙</div>
                                                    <div class="emoji-option" data-value="🧆">🧆</div>
                                                    <div class="emoji-option" data-value="🌮">🌮</div>
                                                    <div class="emoji-option" data-value="🌯">🌯</div>
                                                    <div class="emoji-option" data-value="🥗">🥗</div>
                                                    <div class="emoji-option" data-value="🥘">🥘</div>
                                                    <div class="emoji-option" data-value="🥫">🥫</div>
                                                    <div class="emoji-option" data-value="🍝">🍝</div>
                                                    <div class="emoji-option" data-value="🍜">🍜</div>
                                                    <div class="emoji-option" data-value="🍲">🍲</div>
                                                    <div class="emoji-option" data-value="🍛">🍛</div>
                                                    <div class="emoji-option" data-value="🍣">🍣</div>
                                                    <div class="emoji-option" data-value="🍱">🍱</div>
                                                    <div class="emoji-option" data-value="🥟">🥟</div>
                                                    <div class="emoji-option" data-value="🦪">🦪</div>
                                                    <div class="emoji-option" data-value="🍤">🍤</div>
                                                    <div class="emoji-option" data-value="🍙">🍙</div>
                                                    <div class="emoji-option" data-value="🍚">🍚</div>
                                                    <div class="emoji-option" data-value="🍘">🍘</div>
                                                    <div class="emoji-option" data-value="🍥">🍥</div>
                                                    <div class="emoji-option" data-value="🥠">🥠</div>
                                                    <div class="emoji-option" data-value="🥮">🥮</div>
                                                    <div class="emoji-option" data-value="🍢">🍢</div>
                                                    <div class="emoji-option" data-value="🍡">🍡</div>
                                                    <div class="emoji-option" data-value="🍧">🍧</div>
                                                    <div class="emoji-option" data-value="🍨">🍨</div>
                                                    <div class="emoji-option" data-value="🍦">🍦</div>
                                                    <div class="emoji-option" data-value="🥧">🥧</div>
                                                    <div class="emoji-option" data-value="🧁">🧁</div>
                                                    <div class="emoji-option" data-value="🍰">🍰</div>
                                                    <div class="emoji-option" data-value="🎂">🎂</div>
                                                    <div class="emoji-option" data-value="🍮">🍮</div>
                                                    <div class="emoji-option" data-value="🍭">🍭</div>
                                                    <div class="emoji-option" data-value="🍬">🍬</div>
                                                    <div class="emoji-option" data-value="🍫">🍫</div>
                                                    <div class="emoji-option" data-value="🍿">🍿</div>
                                                    <div class="emoji-option" data-value="🍩">🍩</div>
                                                    <div class="emoji-option" data-value="🍪">🍪</div>
                                                    <div class="emoji-option" data-value="🌰">🌰</div>
                                                    <div class="emoji-option" data-value="🥜">🥜</div>
                                                    <div class="emoji-option" data-value="🍯">🍯</div>
                                                    <div class="emoji-option" data-value="🥛">🥛</div>
                                                    <div class="emoji-option" data-value="🍼">🍼</div>
                                                    <div class="emoji-option" data-value="☕">☕</div>
                                                    <div class="emoji-option" data-value="🍵">🍵</div>
                                                    <div class="emoji-option" data-value="🧃">🧃</div>
                                                    <div class="emoji-option" data-value="🥤">🥤</div>
                                                    <div class="emoji-option" data-value="🍶">🍶</div>
                                                    <div class="emoji-option" data-value="🍺">🍺</div>
                                                    <div class="emoji-option" data-value="🍻">🍻</div>
                                                    <div class="emoji-option" data-value="🥂">🥂</div>
                                                    <div class="emoji-option" data-value="🍷">🍷</div>
                                                    <div class="emoji-option" data-value="🥃">🥃</div>
                                                    <div class="emoji-option" data-value="🍸">🍸</div>
                                                    <div class="emoji-option" data-value="🍹">🍹</div>
                                                    <div class="emoji-option" data-value="🧉">🧉</div>
                                                    <div class="emoji-option" data-value="🍾">🍾</div>
                                                    <div class="emoji-option" data-value="🧊">🧊</div>
                                                    <div class="emoji-option" data-value="🥄">🥄</div>
                                                    <div class="emoji-option" data-value="🍴">🍴</div>
                                                    <div class="emoji-option" data-value="🍽">🍽</div>
                                                    <div class="emoji-option" data-value="🥣">🥣</div>
                                                    <div class="emoji-option" data-value="🥡">🥡</div>
                                                    <div class="emoji-option" data-value="🥢">🥢</div>
                                                    <div class="emoji-option" data-value="🧂">🧂</div>

                                                    <!-- Activités -->
                                                    <div class="emoji-category-header">Activités</div>
                                                    <div class="emoji-option" data-value="⚽">⚽</div>
                                                    <div class="emoji-option" data-value="🏀">🏀</div>
                                                    <div class="emoji-option" data-value="🏈">🏈</div>
                                                    <div class="emoji-option" data-value="⚾">⚾</div>
                                                    <div class="emoji-option" data-value="🥎">🥎</div>
                                                    <div class="emoji-option" data-value="🎾">🎾</div>
                                                    <div class="emoji-option" data-value="🏐">🏐</div>
                                                    <div class="emoji-option" data-value="🏉">🏉</div>
                                                    <div class="emoji-option" data-value="🥏">🥏</div>
                                                    <div class="emoji-option" data-value="🎱">🎱</div>
                                                    <div class="emoji-option" data-value="🪀">🪀</div>
                                                    <div class="emoji-option" data-value="🏓">🏓</div>
                                                    <div class="emoji-option" data-value="🏸">🏸</div>
                                                    <div class="emoji-option" data-value="🏒">🏒</div>
                                                    <div class="emoji-option" data-value="🏑">🏑</div>
                                                    <div class="emoji-option" data-value="🥍">🥍</div>
                                                    <div class="emoji-option" data-value="🏏">🏏</div>
                                                    <div class="emoji-option" data-value="🥅">🥅</div>
                                                    <div class="emoji-option" data-value="⛳">⛳</div>
                                                    <div class="emoji-option" data-value="🪁">🪁</div>
                                                    <div class="emoji-option" data-value="🏹">🏹</div>
                                                    <div class="emoji-option" data-value="🎣">🎣</div>
                                                    <div class="emoji-option" data-value="🤿">🤿</div>
                                                    <div class="emoji-option" data-value="🥊">🥊</div>
                                                    <div class="emoji-option" data-value="🥋">🥋</div>
                                                    <div class="emoji-option" data-value="🎽">🎽</div>
                                                    <div class="emoji-option" data-value="🛹">🛹</div>
                                                    <div class="emoji-option" data-value="🛷">🛷</div>
                                                    <div class="emoji-option" data-value="⛸">⛸</div>
                                                    <div class="emoji-option" data-value="🥌">🥌</div>
                                                    <div class="emoji-option" data-value="🎿">🎿</div>
                                                    <div class="emoji-option" data-value="⛷">⛷</div>
                                                    <div class="emoji-option" data-value="🏂">🏂</div>
                                                    <div class="emoji-option" data-value="🪂">🪂</div>
                                                    <div class="emoji-option" data-value="🏋">🏋</div>
                                                    <div class="emoji-option" data-value="🤼">🤼</div>
                                                    <div class="emoji-option" data-value="🤸">🤸</div>
                                                    <div class="emoji-option" data-value="⛹">⛹</div>
                                                    <div class="emoji-option" data-value="🤺">🤺</div>
                                                    <div class="emoji-option" data-value="🤾">🤾</div>
                                                    <div class="emoji-option" data-value="🏌">🏌</div>
                                                    <div class="emoji-option" data-value="🏇">🏇</div>
                                                    <div class="emoji-option" data-value="🧘">🧘</div>
                                                    <div class="emoji-option" data-value="🏄">🏄</div>
                                                    <div class="emoji-option" data-value="🏊">🏊</div>
                                                    <div class="emoji-option" data-value="🤽">🤽</div>
                                                    <div class="emoji-option" data-value="🚣">🚣</div>
                                                    <div class="emoji-option" data-value="🧗">🧗</div>
                                                    <div class="emoji-option" data-value="🚵">🚵</div>
                                                    <div class="emoji-option" data-value="🚴">🚴</div>
                                                    <div class="emoji-option" data-value="🏆">🏆</div>
                                                    <div class="emoji-option" data-value="🥇">🥇</div>
                                                    <div class="emoji-option" data-value="🥈">🥈</div>
                                                    <div class="emoji-option" data-value="🥉">🥉</div>
                                                    <div class="emoji-option" data-value="🏅">🏅</div>
                                                    <div class="emoji-option" data-value="🎖">🎖</div>
                                                    <div class="emoji-option" data-value="🏵">🏵</div>
                                                    <div class="emoji-option" data-value="🎗">🎗</div>
                                                    <div class="emoji-option" data-value="🎫">🎫</div>
                                                    <div class="emoji-option" data-value="🎟">🎟</div>
                                                    <div class="emoji-option" data-value="🎪">🎪</div>
                                                    <div class="emoji-option" data-value="🤹">🤹</div>
                                                    <div class="emoji-option" data-value="🎭">🎭</div>
                                                    <div class="emoji-option" data-value="🩰">🩰</div>
                                                    <div class="emoji-option" data-value="🎨">🎨</div>
                                                    <div class="emoji-option" data-value="🎬">🎬</div>
                                                    <div class="emoji-option" data-value="🎤">🎤</div>
                                                    <div class="emoji-option" data-value="🎧">🎧</div>
                                                    <div class="emoji-option" data-value="🎼">🎼</div>
                                                    <div class="emoji-option" data-value="🎹">🎹</div>
                                                    <div class="emoji-option" data-value="🥁">🥁</div>
                                                    <div class="emoji-option" data-value="🎷">🎷</div>
                                                    <div class="emoji-option" data-value="🎺">🎺</div>
                                                    <div class="emoji-option" data-value="🎸">🎸</div>
                                                    <div class="emoji-option" data-value="🪕">🪕</div>
                                                    <div class="emoji-option" data-value="🎻">🎻</div>
                                                    <div class="emoji-option" data-value="🎲">🎲</div>
                                                    <div class="emoji-option" data-value="♟">♟</div>
                                                    <div class="emoji-option" data-value="🎯">🎯</div>
                                                    <div class="emoji-option" data-value="🎳">🎳</div>
                                                    <div class="emoji-option" data-value="🎮">🎮</div>
                                                    <div class="emoji-option" data-value="🎰">🎰</div>
                                                    <div class="emoji-option" data-value="🧩">🧩</div>

                                                    <!-- Objets -->
                                                    <div class="emoji-category-header">Objets</div>
                                                    <div class="emoji-option" data-value="🚀">🚀</div>
                                                    <div class="emoji-option" data-value="🛸">🛸</div>
                                                    <div class="emoji-option" data-value="🚁">🚁</div>
                                                    <div class="emoji-option" data-value="🛶">🛶</div>
                                                    <div class="emoji-option" data-value="⛵">⛵</div>
                                                    <div class="emoji-option" data-value="🚤">🚤</div>
                                                    <div class="emoji-option" data-value="🛥">🛥</div>
                                                    <div class="emoji-option" data-value="🛳">🛳</div>
                                                    <div class="emoji-option" data-value="⛴">⛴</div>
                                                    <div class="emoji-option" data-value="🚢">🚢</div>
                                                    <div class="emoji-option" data-value="⚓">⚓</div>
                                                    <div class="emoji-option" data-value="⛽">⛽</div>
                                                    <div class="emoji-option" data-value="🚧">🚧</div>
                                                    <div class="emoji-option" data-value="🚦">🚦</div>
                                                    <div class="emoji-option" data-value="🚥">🚥</div>
                                                    <div class="emoji-option" data-value="🚏">🚏</div>
                                                    <div class="emoji-option" data-value="🗺">🗺</div>
                                                    <div class="emoji-option" data-value="🗿">🗿</div>
                                                    <div class="emoji-option" data-value="🗽">🗽</div>
                                                    <div class="emoji-option" data-value="🗼">🗼</div>
                                                    <div class="emoji-option" data-value="🏰">🏰</div>
                                                    <div class="emoji-option" data-value="🏯">🏯</div>
                                                    <div class="emoji-option" data-value="🏟">🏟</div>
                                                    <div class="emoji-option" data-value="🎡">🎡</div>
                                                    <div class="emoji-option" data-value="🎢">🎢</div>
                                                    <div class="emoji-option" data-value="🎠">🎠</div>
                                                    <div class="emoji-option" data-value="⛲">⛲</div>
                                                    <div class="emoji-option" data-value="⛱">⛱</div>
                                                    <div class="emoji-option" data-value="🏖">🏖</div>
                                                    <div class="emoji-option" data-value="🏝">🏝</div>
                                                    <div class="emoji-option" data-value="🏜">🏜</div>
                                                    <div class="emoji-option" data-value="🌋">🌋</div>
                                                    <div class="emoji-option" data-value="⛰">⛰</div>
                                                    <div class="emoji-option" data-value="🏔">🏔</div>
                                                    <div class="emoji-option" data-value="🗻">🗻</div>
                                                    <div class="emoji-option" data-value="🏕">🏕</div>
                                                    <div class="emoji-option" data-value="⛺">⛺</div>
                                                    <div class="emoji-option" data-value="🏠">🏠</div>
                                                    <div class="emoji-option" data-value="🏡">🏡</div>
                                                    <div class="emoji-option" data-value="🏘">🏘</div>
                                                    <div class="emoji-option" data-value="🏚">🏚</div>
                                                    <div class="emoji-option" data-value="🏗">🏗</div>
                                                    <div class="emoji-option" data-value="🏭">🏭</div>
                                                    <div class="emoji-option" data-value="🏢">🏢</div>
                                                    <div class="emoji-option" data-value="🏬">🏬</div>
                                                    <div class="emoji-option" data-value="🏣">🏣</div>
                                                    <div class="emoji-option" data-value="🏤">🏤</div>
                                                    <div class="emoji-option" data-value="🏥">🏥</div>
                                                    <div class="emoji-option" data-value="🏦">🏦</div>
                                                    <div class="emoji-option" data-value="🏨">🏨</div>
                                                    <div class="emoji-option" data-value="🏪">🏪</div>
                                                    <div class="emoji-option" data-value="🏫">🏫</div>
                                                    <div class="emoji-option" data-value="🏩">🏩</div>
                                                    <div class="emoji-option" data-value="💒">💒</div>
                                                    <div class="emoji-option" data-value="🏛">🏛</div>
                                                    <div class="emoji-option" data-value="⛪">⛪</div>
                                                    <div class="emoji-option" data-value="🕌">🕌</div>
                                                    <div class="emoji-option" data-value="🕍">🕍</div>
                                                    <div class="emoji-option" data-value="🛕">🛕</div>
                                                    <div class="emoji-option" data-value="🕋">🕋</div>
                                                    <div class="emoji-option" data-value="⛩">⛩</div>
                                                    <div class="emoji-option" data-value="🛤">🛤</div>
                                                    <div class="emoji-option" data-value="🛣">🛣</div>
                                                    <div class="emoji-option" data-value="🗾">🗾</div>
                                                    <div class="emoji-option" data-value="🎑">🎑</div>
                                                    <div class="emoji-option" data-value="🏞">🏞</div>
                                                    <div class="emoji-option" data-value="🌅">🌅</div>
                                                    <div class="emoji-option" data-value="🌄">🌄</div>
                                                    <div class="emoji-option" data-value="🌠">🌠</div>
                                                    <div class="emoji-option" data-value="🎇">🎇</div>
                                                    <div class="emoji-option" data-value="🎆">🎆</div>
                                                    <div class="emoji-option" data-value="🌇">🌇</div>
                                                    <div class="emoji-option" data-value="🌆">🌆</div>
                                                    <div class="emoji-option" data-value="🏙">🏙</div>
                                                    <div class="emoji-option" data-value="🌃">🌃</div>
                                                    <div class="emoji-option" data-value="🌌">🌌</div>
                                                    <div class="emoji-option" data-value="🌉">🌉</div>
                                                    <div class="emoji-option" data-value="🌁">🌁</div>
                                                    <div class="emoji-option" data-value="⌚">⌚</div>
                                                    <div class="emoji-option" data-value="📱">📱</div>
                                                    <div class="emoji-option" data-value="📲">📲</div>
                                                    <div class="emoji-option" data-value="💻">💻</div>
                                                    <div class="emoji-option" data-value="⌨">⌨</div>
                                                    <div class="emoji-option" data-value="🖥">🖥</div>
                                                    <div class="emoji-option" data-value="🖨">🖨</div>
                                                    <div class="emoji-option" data-value="🖱">🖱</div>
                                                    <div class="emoji-option" data-value="🖲">🖲</div>
                                                    <div class="emoji-option" data-value="🕹">🕹</div>
                                                    <div class="emoji-option" data-value="🗜">🗜</div>
                                                    <div class="emoji-option" data-value="💽">💽</div>
                                                    <div class="emoji-option" data-value="💾">💾</div>
                                                    <div class="emoji-option" data-value="💿">💿</div>
                                                    <div class="emoji-option" data-value="📀">📀</div>
                                                    <div class="emoji-option" data-value="📼">📼</div>
                                                    <div class="emoji-option" data-value="📷">📷</div>
                                                    <div class="emoji-option" data-value="📸">📸</div>
                                                    <div class="emoji-option" data-value="📹">📹</div>
                                                    <div class="emoji-option" data-value="🎥">🎥</div>
                                                    <div class="emoji-option" data-value="📽">📽</div>
                                                    <div class="emoji-option" data-value="🎞">🎞</div>
                                                    <div class="emoji-option" data-value="📞">📞</div>
                                                    <div class="emoji-option" data-value="☎">☎</div>
                                                    <div class="emoji-option" data-value="📟">📟</div>
                                                    <div class="emoji-option" data-value="📠">📠</div>
                                                    <div class="emoji-option" data-value="📺">📺</div>
                                                    <div class="emoji-option" data-value="📻">📻</div>
                                                    <div class="emoji-option" data-value="🎙">🎙</div>
                                                    <div class="emoji-option" data-value="🎚">🎚</div>
                                                    <div class="emoji-option" data-value="🎛">🎛</div>
                                                    <div class="emoji-option" data-value="🧭">🧭</div>
                                                    <div class="emoji-option" data-value="⏱">⏱</div>
                                                    <div class="emoji-option" data-value="⏲">⏲</div>
                                                    <div class="emoji-option" data-value="⏰">⏰</div>
                                                    <div class="emoji-option" data-value="🕰">🕰</div>
                                                    <div class="emoji-option" data-value="⌛">⌛</div>
                                                    <div class="emoji-option" data-value="⏳">⏳</div>
                                                    <div class="emoji-option" data-value="📡">📡</div>
                                                    <div class="emoji-option" data-value="🔋">🔋</div>
                                                    <div class="emoji-option" data-value="🔌">🔌</div>
                                                    <div class="emoji-option" data-value="💡">💡</div>
                                                    <div class="emoji-option" data-value="🔦">🔦</div>
                                                    <div class="emoji-option" data-value="🕯">🕯</div>
                                                    <div class="emoji-option" data-value="🪔">🪔</div>
                                                    <div class="emoji-option" data-value="🧯">🧯</div>
                                                    <div class="emoji-option" data-value="🛢">🛢</div>
                                                    <div class="emoji-option" data-value="💸">💸</div>
                                                    <div class="emoji-option" data-value="💵">💵</div>
                                                    <div class="emoji-option" data-value="💴">💴</div>
                                                    <div class="emoji-option" data-value="💶">💶</div>
                                                    <div class="emoji-option" data-value="💷">💷</div>
                                                    <div class="emoji-option" data-value="💰">💰</div>
                                                    <div class="emoji-option" data-value="💳">💳</div>
                                                    <div class="emoji-option" data-value="💎">💎</div>
                                                    <div class="emoji-option" data-value="⚖">⚖</div>
                                                    <div class="emoji-option" data-value="🧰">🧰</div>
                                                    <div class="emoji-option" data-value="🔧">🔧</div>
                                                    <div class="emoji-option" data-value="🔨">🔨</div>
                                                    <div class="emoji-option" data-value="⚒">⚒</div>
                                                    <div class="emoji-option" data-value="🛠">🛠</div>
                                                    <div class="emoji-option" data-value="⛏">⛏</div>
                                                    <div class="emoji-option" data-value="🔩">🔩</div>
                                                    <div class="emoji-option" data-value="⚙">⚙</div>
                                                    <div class="emoji-option" data-value="🧱">🧱</div>
                                                    <div class="emoji-option" data-value="⛓">⛓</div>
                                                    <div class="emoji-option" data-value="🧲">🧲</div>
                                                    <div class="emoji-option" data-value="🔫">🔫</div>
                                                    <div class="emoji-option" data-value="💣">💣</div>
                                                    <div class="emoji-option" data-value="🧨">🧨</div>
                                                    <div class="emoji-option" data-value="🪓">🪓</div>
                                                    <div class="emoji-option" data-value="🔪">🔪</div>
                                                    <div class="emoji-option" data-value="🗡">🗡</div>
                                                    <div class="emoji-option" data-value="⚔">⚔</div>
                                                    <div class="emoji-option" data-value="🛡">🛡</div>
                                                    <div class="emoji-option" data-value="🚬">🚬</div>
                                                    <div class="emoji-option" data-value="⚰">⚰</div>
                                                    <div class="emoji-option" data-value="⚱">⚱</div>
                                                    <div class="emoji-option" data-value="🏺">🏺</div>
                                                    <div class="emoji-option" data-value="🔮">🔮</div>
                                                    <div class="emoji-option" data-value="📿">📿</div>
                                                    <div class="emoji-option" data-value="🧿">🧿</div>
                                                    <div class="emoji-option" data-value="💈">💈</div>
                                                    <div class="emoji-option" data-value="⚗">⚗</div>
                                                    <div class="emoji-option" data-value="🔭">🔭</div>
                                                    <div class="emoji-option" data-value="🔬">🔬</div>
                                                    <div class="emoji-option" data-value="🕳">🕳</div>
                                                    <div class="emoji-option" data-value="🩹">🩹</div>
                                                    <div class="emoji-option" data-value="🩺">🩺</div>
                                                    <div class="emoji-option" data-value="💊">💊</div>
                                                    <div class="emoji-option" data-value="💉">💉</div>
                                                    <div class="emoji-option" data-value="🩸">🩸</div>
                                                    <div class="emoji-option" data-value="🧬">🧬</div>
                                                    <div class="emoji-option" data-value="🦠">🦠</div>
                                                    <div class="emoji-option" data-value="🧫">🧫</div>
                                                    <div class="emoji-option" data-value="🧪">🧪</div>
                                                    <div class="emoji-option" data-value="🌡">🌡</div>
                                                    <div class="emoji-option" data-value="🧹">🧹</div>
                                                    <div class="emoji-option" data-value="🧺">🧺</div>
                                                    <div class="emoji-option" data-value="🧻">🧻</div>
                                                    <div class="emoji-option" data-value="🚽">🚽</div>
                                                    <div class="emoji-option" data-value="🚰">🚰</div>
                                                    <div class="emoji-option" data-value="🚿">🚿</div>
                                                    <div class="emoji-option" data-value="🛁">🛁</div>
                                                    <div class="emoji-option" data-value="🛀">🛀</div>
                                                    <div class="emoji-option" data-value="🧼">🧼</div>
                                                    <div class="emoji-option" data-value="🪒">🪒</div>
                                                    <div class="emoji-option" data-value="🧽">🧽</div>
                                                    <div class="emoji-option" data-value="🧴">🧴</div>
                                                    <div class="emoji-option" data-value="🛎">🛎</div>
                                                    <div class="emoji-option" data-value="🔑">🔑</div>
                                                    <div class="emoji-option" data-value="🗝">🗝</div>
                                                    <div class="emoji-option" data-value="🚪">🚪</div>
                                                    <div class="emoji-option" data-value="🪑">🪑</div>
                                                    <div class="emoji-option" data-value="🛋">🛋</div>
                                                    <div class="emoji-option" data-value="🛏">🛏</div>
                                                    <div class="emoji-option" data-value="🛌">🛌</div>
                                                    <div class="emoji-option" data-value="🧸">🧸</div>
                                                    <div class="emoji-option" data-value="🖼">🖼</div>
                                                    <div class="emoji-option" data-value="🛍">🛍</div>
                                                    <div class="emoji-option" data-value="🛒">🛒</div>
                                                    <div class="emoji-option" data-value="🎁">🎁</div>
                                                    <div class="emoji-option" data-value="🎈">🎈</div>
                                                    <div class="emoji-option" data-value="🎏">🎏</div>
                                                    <div class="emoji-option" data-value="🎀">🎀</div>
                                                    <div class="emoji-option" data-value="🎊">🎊</div>
                                                    <div class="emoji-option" data-value="🎉">🎉</div>
                                                    <div class="emoji-option" data-value="🎎">🎎</div>
                                                    <div class="emoji-option" data-value="🏮">🏮</div>
                                                    <div class="emoji-option" data-value="🎐">🎐</div>
                                                    <div class="emoji-option" data-value="🧧">🧧</div>
                                                    <div class="emoji-option" data-value="✉">✉</div>
                                                    <div class="emoji-option" data-value="📩">📩</div>
                                                    <div class="emoji-option" data-value="📨">📨</div>
                                                    <div class="emoji-option" data-value="📧">📧</div>
                                                    <div class="emoji-option" data-value="💌">💌</div>
                                                    <div class="emoji-option" data-value="📥">📥</div>
                                                    <div class="emoji-option" data-value="📤">📤</div>
                                                    <div class="emoji-option" data-value="📦">📦</div>
                                                    <div class="emoji-option" data-value="🏷">🏷</div>
                                                    <div class="emoji-option" data-value="📪">📪</div>
                                                    <div class="emoji-option" data-value="📫">📫</div>
                                                    <div class="emoji-option" data-value="📬">📬</div>
                                                    <div class="emoji-option" data-value="📭">📭</div>
                                                    <div class="emoji-option" data-value="📮">📮</div>
                                                    <div class="emoji-option" data-value="📯">📯</div>
                                                    <div class="emoji-option" data-value="📜">📜</div>
                                                    <div class="emoji-option" data-value="📃">📃</div>
                                                    <div class="emoji-option" data-value="📄">📄</div>
                                                    <div class="emoji-option" data-value="📑">📑</div>
                                                    <div class="emoji-option" data-value="🧾">🧾</div>
                                                    <div class="emoji-option" data-value="📊">📊</div>
                                                    <div class="emoji-option" data-value="📈">📈</div>
                                                    <div class="emoji-option" data-value="📉">📉</div>
                                                    <div class="emoji-option" data-value="🗒">🗒</div>
                                                    <div class="emoji-option" data-value="🗓">🗓</div>
                                                    <div class="emoji-option" data-value="📆">📆</div>
                                                    <div class="emoji-option" data-value="📅">📅</div>
                                                    <div class="emoji-option" data-value="🗑">🗑</div>
                                                    <div class="emoji-option" data-value="📇">📇</div>
                                                    <div class="emoji-option" data-value="🗃">🗃</div>
                                                    <div class="emoji-option" data-value="🗳">🗳</div>
                                                    <div class="emoji-option" data-value="🗄">🗄</div>
                                                    <div class="emoji-option" data-value="📋">📋</div>
                                                    <div class="emoji-option" data-value="📁">📁</div>
                                                    <div class="emoji-option" data-value="📂">📂</div>
                                                    <div class="emoji-option" data-value="🗂">🗂</div>
                                                    <div class="emoji-option" data-value="🗞">🗞</div>
                                                    <div class="emoji-option" data-value="📰">📰</div>
                                                    <div class="emoji-option" data-value="📓">📓</div>
                                                    <div class="emoji-option" data-value="📔">📔</div>
                                                    <div class="emoji-option" data-value="📒">📒</div>
                                                    <div class="emoji-option" data-value="📕">📕</div>
                                                    <div class="emoji-option" data-value="📗">📗</div>
                                                    <div class="emoji-option" data-value="📘">📘</div>
                                                    <div class="emoji-option" data-value="📙">📙</div>
                                                    <div class="emoji-option" data-value="📚">📚</div>
                                                    <div class="emoji-option" data-value="📖">📖</div>
                                                    <div class="emoji-option" data-value="🔖">🔖</div>
                                                    <div class="emoji-option" data-value="🧷">🧷</div>
                                                    <div class="emoji-option" data-value="🔗">🔗</div>
                                                    <div class="emoji-option" data-value="📎">📎</div>
                                                    <div class="emoji-option" data-value="🖇">🖇</div>
                                                    <div class="emoji-option" data-value="📐">📐</div>
                                                    <div class="emoji-option" data-value="📏">📏</div>
                                                    <div class="emoji-option" data-value="🧮">🧮</div>
                                                    <div class="emoji-option" data-value="📌">📌</div>
                                                    <div class="emoji-option" data-value="📍">📍</div>
                                                    <div class="emoji-option" data-value="✂">✂</div>
                                                    <div class="emoji-option" data-value="🖊">🖊</div>
                                                    <div class="emoji-option" data-value="🖋">🖋</div>
                                                    <div class="emoji-option" data-value="✒">✒</div>
                                                    <div class="emoji-option" data-value="🖌">🖌</div>
                                                    <div class="emoji-option" data-value="🖍">🖍</div>
                                                    <div class="emoji-option" data-value="📝">📝</div>
                                                    <div class="emoji-option" data-value="✏">✏</div>
                                                    <div class="emoji-option" data-value="🔍">🔍</div>
                                                    <div class="emoji-option" data-value="🔎">🔎</div>
                                                    <div class="emoji-option" data-value="🔏">🔏</div>
                                                    <div class="emoji-option" data-value="🔐">🔐</div>
                                                    <div class="emoji-option" data-value="🔒">🔒</div>
                                                    <div class="emoji-option" data-value="🔓">🔓</div>
                                                </div>
                                            </div>
                                            <button id="btn-random-avatar" class="secondary small-btn" title="Aléatoire">
                                                <i class="fas fa-dice"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="mode-draw" class="avatar-mode-content hidden">
                                <div class="controls">
                                    <div class="mini-toolbar">
                                        <div class="avatar-tools-row">
                                            <button id="avatar-tool-pen" class="tool-btn small-btn active" title="Crayon">
                                                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                                            </button>
                                            <button id="avatar-tool-fill" class="tool-btn small-btn" data-tooltip="Remplir">
                                                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <rect x="4" y="4" width="16" height="6" rx="1"></rect>
                                                    <path d="M18 10v3a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-3"></path>
                                                    <path d="M12 15v6"></path>
                                                </svg>
                                            </button>
                                            <button id="avatar-tool-eraser" class="tool-btn small-btn" data-tooltip="Gomme">
                                                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M15.5 3.5 L20.5 8.5 L8.5 20.5 L3.5 15.5 Z"></path>
                                                    <line x1="11" y1="8" x2="16" y2="13"></line>
                                                </svg>
                                            </button>
                                            <div class="separator"></div>
                                            <div class="color-trigger small" id="avatar-color-trigger">
                                                <div id="avatar-color-preview" style="background-color: #000000;"></div>
                                            </div>
                                            <button id="avatar-clear-btn" class="secondary small-btn" data-tooltip="Effacer">
                                                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                            </button>
                                        </div>
                                        <div class="avatar-sliders">
                                            <div class="slider-row compact">
                                                <label>Taille</label>
                                                <input type="range" id="avatar-size" min="1" max="20" value="3">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="mode-upload" class="avatar-mode-content hidden">
                                <div class="controls">
                                    <div class="upload-container">
                                        <input type="file" id="avatar-upload" accept="image/*" class="hidden">
                                        <button id="btn-trigger-upload" class="secondary small-btn">
                                            <i class="fas fa-upload"></i> Choisir une image
                                        </button>
                                    </div>
                                    <div id="avatar-image-controls" class="hidden">
                                        <div class="slider-row compact zoom-slider">
                                            <i class="fas fa-search-minus small-icon"></i>
                                            <input type="range" id="avatar-zoom" min="0.1" max="3" step="0.1" value="1">
                                            <i class="fas fa-search-plus small-icon"></i>
                                        </div>
                                        <p class="help-text"><i class="fas fa-arrows-alt"></i> Glisser pour déplacer • <i class="fas fa-mouse"></i> Scroll pour zoomer</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="login-form-side">
                        <div class="form-group">
                            <label for="username">Pseudo</label>
                            <div class="input-group">
                                <input type="text" id="username" placeholder="Ton pseudo" maxlength="15">
                            </div>
                            <div class="checkbox-group" style="margin-top: 8px; display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="spectator-checkbox">
                                <label for="spectator-checkbox" style="margin: 0; font-size: 0.9rem; cursor: pointer;">Mode Observateur</label>
                            </div>
                        </div>

                        <div class="login-tabs-container">
                            <div class="login-tabs">
                                <button class="login-tab active" data-target="tab-join">Rejoindre</button>
                                <button class="login-tab" data-target="tab-create">Créer</button>
                            </div>

                            <div id="tab-join" class="login-tab-content active">
                                <div class="public-lobbies-section">
                                    <div class="active-games-info" style="text-align: center; margin-bottom: 10px; color: var(--text-dim);">
                                        <span id="active-games-count" style="font-weight: bold; color: var(--primary);">0</span> room disponible
                                    </div>
                                    <button id="btn-join-random" class="secondary full-width">
                                        <i class="fas fa-random"></i> Aléatoire
                                    </button>
                                </div>
                                
                                <div class="divider">
                                    <span>OU</span>
                                </div>

                                <div class="form-group">
                                    <label>Code de la room</label>
                                    <div class="input-group">
                                        <input type="text" id="room-code-input" placeholder="Ex: ABCDEF">
                                        <button id="join-btn">GO</button>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-create" class="login-tab-content">
                                <div class="create-section">
                                    <div class="form-group" style="margin-bottom: 10px;">
                                        <label for="max-players-input" style="text-align: center; display: block; margin-bottom: 5px;">Joueurs Max: <span id="max-players-value" style="color: var(--primary); font-weight: bold;">8</span></label>
                                        <div class="slider-container">
                                            <input type="range" id="max-players-input" min="2" max="8" value="8" class="slider">
                                        </div>
                                    </div>
                                    <div class="checkbox-group" style="margin-bottom: 15px; display: flex; align-items: center; gap: 8px; justify-content: center;">
                                        <input type="checkbox" id="private-room-checkbox">
                                        <label for="private-room-checkbox" style="margin: 0; font-size: 0.9rem; cursor: pointer;">Partie Privée</label>
                                    </div>
                                    <button id="create-btn" class="secondary full-width">Créer une room</button>
                                    <p class="help-text" style="text-align: center; margin-top: 15px;">
                                        Créez une partie et invitez vos amis avec le code !
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen hidden">
            <!-- Top Bar -->
            <div id="game-top-bar" class="game-top-bar hidden">
                <div class="timer-display">
                    <i class="fas fa-clock"></i> <span id="timer-value">0</span>
                </div>
                <div class="word-display" id="word-display">
                    _ _ _ _ _
                </div>
                <div class="round-info">
                    Round <span id="round-current">1</span>/<span id="round-total">3</span>
                </div>
            </div>

            <!-- Word Choice Modal -->
            <div id="word-choice-modal" class="modal hidden">
                <div class="modal-content">
                    <h3>Choisissez un mot</h3>
                    <div class="word-choice-timer">Temps restant : <span id="word-choice-timer-val">20</span>s</div>
                    <div id="word-choices-container" class="word-choices">
                        <!-- Buttons will be injected here -->
                    </div>
                </div>
            </div>

            <!-- Round Result Overlay -->
            <div id="round-result-overlay" class="modal hidden">
                <div class="modal-content result-content">
                    <h2 id="round-result-title">Le mot était :</h2>
                    <div class="result-subtitle">Le mot était :</div>
                    <div id="round-result-word" class="result-word">MAISON</div>
                    <div class="result-subtitle">Points gagnés ce tour :</div>
                    <div id="round-result-scores" class="result-scores"></div>
                </div>
            </div>

            <!-- Game End Modal -->
            <div id="game-end-modal" class="modal hidden">
                <div class="modal-content result-content">
                    <h2><i class="fas fa-trophy"></i> Classement Final</h2>
                    <div id="game-end-scores" class="result-scores leaderboard"></div>
                    <div class="modal-actions">
                        <button id="btn-return-lobby" class="btn-primary">Retour au lobby</button>
                    </div>
                </div>
            </div>

            <!-- Ready Check Modal -->
            <div id="ready-check-modal" class="modal hidden">
                <div class="modal-content ready-check-content">
                    <h2><i class="fas fa-check-circle"></i> Êtes-vous prêt ?</h2>
                    
                    <div class="ready-game-info">
                        <div id="ready-mode-display" class="ready-mode">Mode: Devine le dessin</div>
                        <div id="ready-settings-display" class="ready-settings"></div>
                    </div>

                    <div class="ready-status">
                        <div class="ready-count"><span id="ready-count-val">0</span>/<span id="ready-total-val">0</span></div>
                        <div>joueurs prêts</div>
                    </div>
                    <div id="ready-players-list" class="ready-players-list"></div>
                    
                    <div class="ready-actions">
                        <button id="btn-refuse-game" class="btn-danger-outline">REFUSER</button>
                        <button id="btn-i-am-ready" class="btn-ready">JE SUIS PRÊT !</button>
                    </div>
                    
                    <div class="ready-timer">Annulation dans <span id="ready-timer-val">60</span>s</div>
                </div>
            </div>

            <!-- Game Settings Modal -->
            <div id="lobby-settings-modal" class="modal hidden">
                <div class="modal-content settings-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-cog"></i> Paramètres de la partie</h3>
                        <button id="btn-close-settings" class="close-btn"><i class="fas fa-times"></i></button>
                    </div>
                    
                    <div class="setting-section">
                        <label>Mode de jeu</label>
                        <div class="gamemode-cards">
                            <div class="gamemode-card selected" data-mode="guess-word">
                                <div class="card-icon"><i class="fas fa-pencil-alt"></i></div>
                                <div class="card-info">
                                    <h4>Devine le dessin</h4>
                                    <p>Un joueur dessine, les autres devinent.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="settings-guess-word" class="mode-settings">
                        <div class="settings-grid">
                            <div class="setting-group">
                                <label>Temps de dessin (sec)</label>
                                <input type="number" id="setting-drawtime" value="80" min="30" max="300">
                            </div>
                            <div class="setting-group">
                                <label>Temps de choix (sec)</label>
                                <input type="number" id="setting-wordchoicetime" value="20" min="10" max="60">
                            </div>
                            <div class="setting-group">
                                <label>Choix de mots</label>
                                <input type="number" id="setting-wordchoices" value="3" min="1" max="5">
                            </div>
                            <div class="setting-group">
                                <label>Nombre de tours</label>
                                <input type="number" id="setting-rounds" value="3" min="1" max="10">
                            </div>
                        </div>
                        <div class="setting-group checkbox-group">
                            <input type="checkbox" id="setting-fuzzy">
                            <label for="setting-fuzzy">Autoriser les accents approximatifs</label>
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button id="btn-start-game" class="btn-primary">
                            <i class="fas fa-play"></i> Lancer la partie
                        </button>
                    </div>
                </div>
            </div>

            <!-- User Settings Modal -->
            <div id="user-settings-modal" class="modal hidden">
                <div class="modal-content settings-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-user-cog"></i> Paramètres</h3>
                        <button id="btn-close-user-settings" class="close-btn"><i class="fas fa-times"></i></button>
                    </div>
                    
                    <div class="setting-section">
                        <div class="checkbox-group">
                            <input type="checkbox" id="setting-show-cursors" checked>
                            <label for="setting-show-cursors" style="text-transform: none;">Afficher les curseurs des autres joueurs</label>
                        </div>
                        <div class="checkbox-group" style="margin-top: 15px;">
                            <input type="checkbox" id="setting-show-layer-avatars" checked>
                            <label for="setting-show-layer-avatars" style="text-transform: none;">Afficher la position des joueurs sur les calques</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="room-info">
                    <h3>Room <span id="room-privacy-badge" class="privacy-badge"></span></h3>
                    <div class="room-code-wrapper">
                        <span id="display-room-code" class="code-hidden"></span>
                        <div class="room-actions">
                            <button id="toggle-code-btn" title="Afficher/Masquer">
                                <svg id="icon-eye" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                <svg id="icon-eye-off" class="hidden" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                            </button>
                            <button id="copy-code-btn" title="Copier le code">
                                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="players-header">
                    <h3>Joueurs <span id="player-count-display" style="font-size: 0.8rem; color: var(--text-dim); margin-left: 5px;"></span></h3>
                </div>

                <div id="players-list" class="players-list">
                    <!-- Players will be added here -->
                </div>
                
                <div class="layers-panel">
                    <div class="layers-header">
                        <h3>Calques</h3>
                        <button id="add-layer-btn" title="Nouveau calque">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        </button>
                    </div>
                    <div id="layers-list" class="layers-list">
                        <!-- Layers will be added here -->
                    </div>
                </div>
                
                <div class="sidebar-footer">
                    <div id="lobby-controls" class="hidden">
                        <button id="btn-open-settings" class="btn-primary full-width">
                            <i class="fas fa-cog"></i> Commencer une partie
                        </button>
                        <div id="waiting-message" class="waiting-status hidden">
                            <i class="fas fa-hourglass-half"></i>
                            <span>En attente du leader...</span>
                        </div>
                    </div>
                    <button id="btn-user-settings" class="settings-btn">
                        <i class="fas fa-user-cog"></i> Paramètres
                    </button>
                </div>
            </div>
            
            <div class="main-area">
                <div class="canvas-container" id="canvas-container">
                    <div class="canvas-wrapper" style="position: relative;">
                        <canvas id="drawing-board"></canvas>
                        <div id="cursors-layer"></div>
                    </div>
                    <div id="zoom-overlay" class="zoom-overlay hidden">100%</div>
                </div>

                <div class="toolbar">
                    <!-- Properties Group (Color + Sliders) -->
                    <div class="tool-group properties-group">
                        <div class="color-picker-wrapper" title="Couleur">
                            <div class="color-trigger" id="color-trigger">
                                <div id="current-color-preview"></div>
                            </div>
                        </div>
                        
                        <div class="sliders-compact">
                            <div class="slider-row" data-tooltip="Taille">
                                <div class="slider-icon"><i class="fas fa-circle" style="font-size: 0.6rem;"></i></div>
                                <input type="range" id="pen-size" min="1" max="100" value="5">
                            </div>
                            <div class="slider-row" data-tooltip="Opacité">
                                <div class="slider-icon"><i class="fas fa-adjust" style="font-size: 0.8rem;"></i></div>
                                <input type="range" id="pen-opacity" min="0.1" max="1" step="0.1" value="1">
                            </div>
                        </div>
                    </div>

                    <!-- Drawing Tools Group -->
                    <div class="tool-group">
                        <button id="tool-pen" class="tool-btn active" data-tooltip="Crayon (1)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                        </button>
                        <button id="tool-airbrush" class="tool-btn" data-tooltip="Spray (2)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="8" width="12" height="13" rx="2"></rect><path d="M15 8V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4"></path><path d="M12 3v1"></path><path d="M10 12h.01"></path><path d="M14 12h.01"></path><path d="M12 15h.01"></path><path d="M10 17h.01"></path><path d="M14 17h.01"></path></svg>
                        </button>
                        <button id="tool-fill" class="tool-btn" data-tooltip="Remplir (3)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="4" y="4" width="16" height="6" rx="1"></rect>
                                <path d="M18 10v3a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-3"></path>
                                <path d="M12 15v6"></path>
                            </svg>
                        </button>
                        <button id="tool-smudge" class="tool-btn" data-tooltip="Doigt (4)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"></path>
                                <path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"></path>
                                <path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"></path>
                                <path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"></path>
                            </svg>
                        </button>
                        <button id="tool-eraser" class="tool-btn" data-tooltip="Gomme (5)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M15.5 3.5 L20.5 8.5 L8.5 20.5 L3.5 15.5 Z"></path>
                                <line x1="11" y1="8" x2="16" y2="13"></line>
                            </svg>
                        </button>
                        <button id="tool-pipette" class="tool-btn" data-tooltip="Pipette (6)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2 22l5-1.5L15.5 12l3-3a2.828 2.828 0 1 0-4-4l-3 3L3.5 17 2 22z"></path>
                                <path d="M13 9l4 4"></path>
                            </svg>
                        </button>
                        <button id="tool-selection" class="tool-btn" data-tooltip="Sélection (7)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-dasharray="4 4"></rect>
                            </svg>
                        </button>
                        
                        <!-- Separator -->
                        <div class="tool-separator"></div>

                        <!-- Shapes -->
                        <button id="tool-rect" class="tool-btn" data-tooltip="Carré (8)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
                        </button>
                        <button id="tool-circle" class="tool-btn" data-tooltip="Cercle (9)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle></svg>
                        </button>
                        <button id="tool-triangle" class="tool-btn" data-tooltip="Triangle (0)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg>
                        </button>
                        <button id="tool-line" class="tool-btn" data-tooltip="Trait (-)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="19" x2="19" y2="5"></line></svg>
                        </button>
                    </div>

                    <!-- Actions Group -->
                    <div class="tool-group">
                        <button id="btn-undo" class="tool-btn" data-tooltip="Annuler (Ctrl+Z)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg>
                        </button>
                        <button id="btn-redo" class="tool-btn" data-tooltip="Rétablir (Ctrl+Y)">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M21 7v6h-6"></path><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"></path></svg>
                        </button>
                        <button id="clear-btn" class="danger-btn" data-tooltip="Tout effacer">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                        <button id="btn-help" class="tool-btn" data-tooltip="Aide">
                            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="chat-sidebar">
                <div class="chat-header">
                    <h3>Chat</h3>
                </div>
                <div id="chat-messages" class="chat-messages">
                    <!-- Messages will appear here -->
                </div>
                <form id="chat-form" class="chat-form">
                    <input type="text" id="chat-input" placeholder="Ecrire un message" autocomplete="off">
                    <button type="submit" title="Envoyer">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </form>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmation-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Confirmation</h3>
                <p>Voulez-vous vraiment tout effacer ?</p>
                <div class="modal-actions">
                    <button id="confirm-cancel" class="secondary">Annuler</button>
                    <button id="confirm-ok" class="danger-btn">Tout effacer</button>
                </div>
            </div>
        </div>

        <!-- Kick Confirmation Modal -->
        <div id="kick-confirmation-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Expulsion</h3>
                <p>Voulez-vous vraiment expulser <span id="kick-player-name" style="font-weight:bold; color:var(--primary);"></span> ?</p>
                <div class="modal-actions">
                    <button id="kick-cancel" class="secondary">Annuler</button>
                    <button id="kick-confirm" class="danger-btn">Expulser</button>
                </div>
            </div>
        </div>

        <!-- Alert Modal -->
        <div id="alert-modal" class="modal hidden">
            <div class="modal-content">
                <h3 id="alert-title">Attention</h3>
                <p id="alert-message">Message d'alerte</p>
                <div class="modal-actions">
                    <button id="alert-ok" class="btn-primary">OK</button>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="help-modal" class="modal hidden">
            <div class="modal-content help-content">
                <div class="modal-header">
                    <h3><i class="fas fa-question-circle"></i> Aide & Raccourcis</h3>
                    <button id="btn-close-help" class="close-btn"><i class="fas fa-times"></i></button>
                </div>
                <div class="help-body">
                    <div class="help-grid">
                        <div class="help-section">
                            <h4>Outils</h4>
                            <ul class="shortcut-list">
                                <li><span class="key">1</span> Crayon</li>
                                <li><span class="key">2</span> Spray</li>
                                <li><span class="key">3</span> Remplir</li>
                                <li><span class="key">4</span> Doigt</li>
                                <li><span class="key">5</span> Gomme</li>
                                <li><span class="key">6</span> Pipette</li>
                                <li><span class="key">7</span> Sélection</li>
                            </ul>
                        </div>
                        <div class="help-section">
                            <h4>Formes</h4>
                            <ul class="shortcut-list">
                                <li><span class="key">8</span> Carré</li>
                                <li><span class="key">9</span> Cercle</li>
                                <li><span class="key">0</span> Triangle</li>
                                <li><span class="key">-</span> Trait</li>
                            </ul>
                        </div>
                        <div class="help-section full-width">
                            <h4>Actions</h4>
                            <ul class="shortcut-list two-col">
                                <li>
                                    <span class="key-group">
                                        <span class="key">Ctrl</span> + <span class="key">Z</span>
                                    </span>
                                    Annuler
                                </li>
                                <li>
                                    <span class="key-group">
                                        <span class="key">Ctrl</span> + <span class="key">Y</span>
                                    </span>
                                    Rétablir
                                </li>
                                <li>
                                    <span class="key-group">
                                        <span class="key">Maj</span>
                                    </span>
                                    (Maintenir) Pipette rapide
                                </li>
                                <li>
                                    <span class="key-group">
                                        <span class="key">Ctrl</span> + <span class="key">Molette</span>
                                    </span>
                                    Taille outil
                                </li>
                                <li>
                                    <span class="key-group">
                                        <span class="key">Alt</span> + <span class="key">Molette</span>
                                    </span>
                                    Opacité outil
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="color-popover" class="color-popover hidden">
            <div class="color-grid" id="color-grid">
                <!-- Generated by JS -->
            </div>
            <div class="custom-color-picker">
                <div class="cp-saturation-area" id="cp-saturation-area">
                    <div class="cp-saturation-cursor" id="cp-saturation-cursor"></div>
                </div>
                <div class="cp-hue-area" id="cp-hue-area">
                    <div class="cp-hue-cursor" id="cp-hue-cursor"></div>
                </div>
                <div class="cp-controls">
                    <div class="cp-preview-color" id="cp-preview-color"></div>
                    <div class="cp-rgb-inputs">
                        <div class="cp-input-group">
                            <label>R</label>
                            <input type="number" id="cp-r" min="0" max="255" value="0">
                        </div>
                        <div class="cp-input-group">
                            <label>G</label>
                            <input type="number" id="cp-g" min="0" max="255" value="0">
                        </div>
                        <div class="cp-input-group">
                            <label>B</label>
                            <input type="number" id="cp-b" min="0" max="255" value="0">
                        </div>
                    </div>
                </div>
                <input type="hidden" id="pen-color" value="#000000">
            </div>
        </div>

        <!-- Avatar Tooltip -->
        <div id="avatar-tooltip" class="avatar-tooltip hidden"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="client.js"></script>
</body>
</html>
