<!-- Game Screen -->
<div id="game-screen" class="screen hidden">
    <!-- SVG Gradients for Tools -->
    <svg width="0" height="0" style="position:absolute; z-index:-1;">
        <defs>
            <linearGradient id="grad-pen" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#ff6b6b" />
                <stop offset="100%" stop-color="#ff9f9f" />
            </linearGradient>
            <linearGradient id="grad-airbrush" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#ff9f43" />
                <stop offset="100%" stop-color="#ffcfa0" />
            </linearGradient>
            <linearGradient id="grad-fill" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#feca57" />
                <stop offset="100%" stop-color="#ffeaa7" />
            </linearGradient>
            <linearGradient id="grad-smudge" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#1dd1a1" />
                <stop offset="100%" stop-color="#55efc4" />
            </linearGradient>
            <linearGradient id="grad-eraser" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#2e86de" />
                <stop offset="100%" stop-color="#54a0ff" />
            </linearGradient>
            <linearGradient id="grad-pipette" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#54a0ff" />
                <stop offset="100%" stop-color="#74b9ff" />
            </linearGradient>
            <linearGradient id="grad-selection" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#a855f7" />
                <stop offset="100%" stop-color="#c084fc" />
            </linearGradient>
            <linearGradient id="grad-rect" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#ff9ff3" />
                <stop offset="100%" stop-color="#ffcdf9" />
            </linearGradient>
            <linearGradient id="grad-circle" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#D980FA" />
                <stop offset="100%" stop-color="#e0aaff" />
            </linearGradient>
            <linearGradient id="grad-triangle" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#9980FA" />
                <stop offset="100%" stop-color="#b599fa" />
            </linearGradient>
            <linearGradient id="grad-line" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#fd79a8" />
                <stop offset="100%" stop-color="#ff9ff3" />
            </linearGradient>
            <linearGradient id="grad-undo" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#c8d6e5" />
                <stop offset="100%" stop-color="#dfe6e9" />
            </linearGradient>
            <linearGradient id="grad-redo" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#c8d6e5" />
                <stop offset="100%" stop-color="#dfe6e9" />
            </linearGradient>
            <linearGradient id="grad-help" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#576574" />
                <stop offset="100%" stop-color="#8395a7" />
            </linearGradient>
            <linearGradient id="grad-model" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="#0984e3" />
                <stop offset="100%" stop-color="#74b9ff" />
            </linearGradient>
        </defs>
    </svg>
    <!-- Top Bar  -->
    <div id="game-top-bar" class="game-top-bar hidden">
        <div id="drawer-name-display" class="drawer-name-display"></div>
        <div class="timer-display">
            <i class="fas fa-clock"></i> <span id="timer-value">0</span>
        </div>
        <div class="word-display-container" style="display:flex; align-items:center; gap:15px;">
            <div class="word-display" id="word-display">
                _ _ _ _ _
            </div>
            <button id="btn-use-hint" class="hint-btn hidden" title="Utiliser un indice (20s cooldown)">
                <i class="fas fa-lightbulb"></i> <span id="hints-count">3</span>
            </button>
        </div>
        <div class="round-info">
            Round&nbsp;<span id="round-current">1</span>/<span id="round-total">3</span>
        </div>
    </div>

    <div class="sidebar-group">
        <!-- Column 1: Room, Players, Footer -->
                                    <div class="sidebar-col-1">
                                        <div class="room-info">
                                            <div class="room-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
                                                <h3 style="margin: 0;">Room <span id="room-privacy-badge" class="privacy-badge"></span></h3>
                                                <div id="network-stats" style="font-size: 0.65rem; color: var(--text-dim); display: grid; grid-template-columns: 1fr 12px; gap: 2px 6px; font-family: monospace; align-items: center;">
                                                    <span id="net-up" style="text-align: right;">0.00 ko/s</span>
                                                    <i class="fas fa-arrow-up" style="color: var(--success); text-align: center;" title="Upload"></i>
                                                    <span id="net-down" style="text-align: right;">0.00 ko/s</span>
                                                    <i class="fas fa-arrow-down" style="color: var(--primary); text-align: center;" title="Download"></i>
                                                </div>
                                            </div>
                                            <div class="room-code-wrapper">
                                                <span id="display-room-code" class="code-hidden"></span>
                                                <div class="room-actions">
                                                    <button id="toggle-code-btn" title="Afficher/Masquer">
                                                        <svg id="icon-eye" viewBox="0 0 24 24" width="18" height="18"
                                                            stroke="currentColor" stroke-width="2" fill="none"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                            <circle cx="12" cy="12" r="3"></circle>
                                                        </svg>
                                                        <svg id="icon-eye-off" class="hidden" viewBox="0 0 24 24" width="18"
                                                            height="18" stroke="currentColor" stroke-width="2" fill="none"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <path
                                                                d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                                                            </path>
                                                            <line x1="1" y1="1" x2="23" y2="23"></line>
                                                        </svg>
                                                    </button>
                                                    <button id="copy-code-btn" title="Copier le code">
                                                        <svg viewBox="0 0 24 24" width="18" height="18"
                                                            stroke="currentColor" stroke-width="2" fill="none"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                                            <path
                                                                d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1">
                                                            </path>
                                                        </svg>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="players-header">
                                            <h3>Joueurs <span id="player-count-display"
                                                    style="font-size: 0.8rem; color: var(--text-dim); margin-left: 5px;"></span>
                                            </h3>
                                        </div>

                                        <div id="players-list" class="players-list">
                                            <!-- Players will be added here -->
                                        </div>

                                        <div class="sidebar-footer">
                                            <div id="lobby-controls" class="hidden">
                                                <button id="btn-open-settings" class="btn-primary full-width hidden">
                                                    <i class="fas fa-cog"></i> Commencer une partie
                                                </button>
                                                <button id="btn-view-settings" class="settings-btn hidden">
                                                    <i class="fas fa-cog"></i> PARAMÈTRES DE PARTIE
                                                </button>
                                                <div id="waiting-message" class="waiting-status hidden">
                                                    <i class="fas fa-hourglass-half"></i>
                                                    <span>En attente du leader...</span>
                                                </div>
                                            </div>
                                            <button id="btn-user-settings" class="settings-btn">
                                                <i class="fas fa-user-cog"></i> Paramètres
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Column 2: Colors, Layers -->
                                    <div class="sidebar-col-2">
                                        <div class="color-sidebar-header" style="display: flex; justify-content: space-between; align-items: center;">
                                            <h3>Couleurs</h3>
                                            <button id="btn-toggle-sidebar-pos" class="icon-btn" title="Changer de côté">
                                                <i class="fas fa-chevron-right"></i>
                                            </button>
                                        </div>
                                        <div class="color-panel">
                                            <%- include('../components/game-color-picker') %>
                                        </div>

                                        <div class="layers-panel">
                                            <div class="layers-header">
                                                <h3>Calques</h3>
                                                <button id="add-layer-btn" title="Nouveau calque">
                                                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor"
                                                        stroke-width="2" fill="none" stroke-linecap="round"
                                                        stroke-linejoin="round">
                                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                                    </svg>
                                                </button>
                                            </div>
                                            <div id="layers-list" class="layers-list">
                                                <!-- Layers will be added here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="main-area">
                                    <div class="canvas-container" id="canvas-container">
                                        <div class="canvas-wrapper" style="position: relative;">
                                            <canvas id="drawing-board"></canvas>
                                            <div id="cursors-layer"></div>
                                        </div>
                                        <div id="zoom-overlay" class="zoom-overlay hidden">100%</div>
                                    </div>

                                    <div class="toolbar" id="game-toolbar">
                                        <!-- Global Pin Controls (Tracing Mode) -->
                                        <div id="global-pin-controls" class="pin-controls-global hidden">
                                            <div class="pin-label"><i class="fas fa-thumbtack"></i> Mode Calque</div>
                                            <div class="pin-slider-group">
                                                <i class="fas fa-adjust"></i>
                                                <input type="range" id="browser-opacity" min="0" max="1" step="0.1" value="0.5" title="Opacité du modèle">
                                            </div>
                                            <button id="btn-browser-unpin" class="pin-action-btn" title="Détacher le modèle">
                                                <i class="fas fa-times"></i> Détacher
                                            </button>
                                        </div>

                                        <!-- Sliders Row (Top) -->
                                        <div class="tool-group sliders-row">
                                            <div class="slider-row" data-tooltip="Taille">
                                                <div class="slider-header">
                                                    <div class="slider-icon"><i class="fas fa-circle" style="font-size: 0.6rem;"></i></div>
                                                    <span class="slider-label">Taille du crayon</span>
                                                </div>
                                                <input type="range" id="pen-size" min="1" max="400" value="10">
                                            </div>

                                            <div class="drag-handle" id="toolbar-drag-handle" title="Déplacer">
                                                <svg viewBox="0 0 24 24" width="14" height="14" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <circle cx="9" cy="5" r="1"></circle>
                                                    <circle cx="9" cy="12" r="1"></circle>
                                                    <circle cx="9" cy="19" r="1"></circle>
                                                    <circle cx="15" cy="5" r="1"></circle>
                                                    <circle cx="15" cy="12" r="1"></circle>
                                                    <circle cx="15" cy="19" r="1"></circle>
                                                </svg>
                                            </div>

                                            <div class="slider-row" data-tooltip="Opacité">
                                                <div class="slider-header">
                                                    <div class="slider-icon"><i class="fas fa-adjust" style="font-size: 0.8rem;"></i></div>
                                                    <span class="slider-label">Opacité</span>
                                                </div>
                                                <input type="range" id="pen-opacity" min="0.1" max="1" step="0.1"
                                                    value="1">
                                            </div>
                                        </div>

                                        <!-- Drawing Tools Group -->
                                        <div class="tool-group">
                                            <button id="tool-pen" class="tool-btn active" data-tooltip="Crayon (1)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z">
                                                    </path>
                                                </svg>
                                                <span class="tool-label">Crayon</span>
                                            </button>
                                            <button id="tool-airbrush" class="tool-btn" data-tooltip="Spray (2)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <rect x="6" y="8" width="12" height="13" rx="2"></rect>
                                                    <path d="M15 8V4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4"></path>
                                                    <path d="M12 3v1"></path>
                                                    <path d="M10 12h.01"></path>
                                                    <path d="M14 12h.01"></path>
                                                    <path d="M12 15h.01"></path>
                                                    <path d="M10 17h.01"></path>
                                                    <path d="M14 17h.01"></path>
                                                </svg>
                                                <span class="tool-label">Spray</span>
                                            </button>
                                            <button id="tool-fill" class="tool-btn" data-tooltip="Remplir (3)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <rect x="5" y="5" width="14" height="5" rx="1"></rect>
                                                    <path d="M17 10v3a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-3"></path>
                                                    <path d="M12 15v4"></path>
                                                </svg>
                                                <span class="tool-label">Remplir</span>
                                            </button>
                                            <button id="tool-smudge" class="tool-btn" data-tooltip="Etaler (4)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"></path>
                                                    <path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"></path>
                                                    <path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"></path>
                                                    <path
                                                        d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15">
                                                    </path>
                                                </svg>
                                                <span class="tool-label">Etaler</span>
                                            </button>

                                            <button id="tool-eraser" class="tool-btn" data-tooltip="Gomme (5)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path d="M15.5 3.5 L20.5 8.5 L8.5 20.5 L3.5 15.5 Z"></path>
                                                    <line x1="11" y1="8" x2="16" y2="13"></line>
                                                </svg>
                                                <span class="tool-label">Gomme</span>
                                            </button>
                                            <button id="tool-pipette" class="tool-btn" data-tooltip="Pipette (6)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path
                                                        d="M2 22l5-1.5L15.5 12l3-3a2.828 2.828 0 1 0-4-4l-3 3L3.5 17 2 22z">
                                                    </path>
                                                    <path d="M13 9l4 4"></path>
                                                </svg>
                                                <span class="tool-label">Pipette</span>
                                            </button>
                                            <button id="tool-selection" class="tool-btn" data-tooltip="Sélection (7)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"
                                                        stroke-dasharray="4 4"></rect>
                                                </svg>
                                                <span class="tool-label">Sélect.</span>
                                            </button>

                                            <div class="tool-separator"></div>

                                            <button id="tool-model" class="tool-btn" data-tooltip="Modèle">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <circle cx="11" cy="11" r="8"></circle>
                                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                                </svg>
                                                <span class="tool-label">Modèle</span>
                                            </button>
                                        </div>

                                        <!-- Shapes + Actions Group -->
                                        <div class="tool-group">
                                            <!-- Shapes -->
                                            <button id="tool-rect" class="tool-btn" data-tooltip="Carré (8)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                                </svg>
                                                <span class="tool-label">Carré</span>
                                            </button>
                                            <button id="tool-circle" class="tool-btn" data-tooltip="Cercle (9)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <circle cx="12" cy="12" r="10"></circle>
                                                </svg>
                                                <span class="tool-label">Cercle</span>
                                            </button>
                                            <button id="tool-triangle" class="tool-btn" data-tooltip="Triangle (0)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path
                                                        d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z">
                                                    </path>
                                                </svg>
                                                <span class="tool-label">Triangle</span>
                                            </button>
                                            <button id="tool-line" class="tool-btn" data-tooltip="Trait (-)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <line x1="5" y1="19" x2="19" y2="5"></line>
                                                </svg>
                                                <span class="tool-label">Trait</span>
                                            </button>

                                            <!-- Actions -->
                                            <button id="btn-undo" class="tool-btn" data-tooltip="Annuler (Ctrl+Z)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path d="M3 7v6h6"></path>
                                                    <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
                                                </svg>
                                                <span class="tool-label">Annuler</span>
                                            </button>
                                            <button id="btn-redo" class="tool-btn" data-tooltip="Rétablir (Ctrl+Y)">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <path d="M21 7v6h-6"></path>
                                                    <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"></path>
                                                </svg>
                                                <span class="tool-label">Rétablir</span>
                                            </button>
                                            <button id="clear-btn" class="tool-btn-danger" data-tooltip="Tout effacer">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <polyline points="3 6 5 6 21 6"></polyline>
                                                    <path
                                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                    </path>
                                                </svg>
                                                <span class="tool-label">Effacer</span>
                                            </button>
                                            
                                            <div class="tool-separator"></div>



                                            <button id="btn-help" class="tool-btn" data-tooltip="Aide">
                                                <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor"
                                                    stroke-width="2" fill="none" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <circle cx="12" cy="12" r="9"></circle>
                                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                                </svg>
                                                <span class="tool-label">Aide</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>





                                <div class="chat-sidebar">
                                    <div class="chat-header">
                                        <h3>Chat</h3>
                                    </div>
                                    <div id="chat-messages" class="chat-messages">
                                        <!-- Messages will appear here -->
                                    </div>
                                    <form id="chat-form" class="chat-form">
                                        <input type="text" id="chat-input" placeholder="Ecrire un message"
                                            autocomplete="off">
                                        <button type="submit" title="Envoyer">
                                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor"
                                                stroke-width="2" fill="none" stroke-linecap="round"
                                                stroke-linejoin="round">
                                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                            </svg>
                                        </button>
                                    </form>
                                </div>

                                <!-- Intermission Modal -->
                                <div id="intermission-modal" class="modal hidden" style="z-index: 2000;">
                                    <div class="modal-content" style="text-align: center; max-width: 500px;">
                                        <h2 style="color: var(--primary); margin-bottom: 1rem;"><i
                                                class="fas fa-pencil-alt"></i> Posez vos crayons !</h2>
                                        <div style="font-size: 1.5rem; margin: 20px 0;">Résultats dans <span
                                                id="intermission-timer"
                                                style="font-weight: bold; color: var(--secondary);">5</span>s</div>
                                    </div>
                                </div>

                                <!-- Creative Presentation Modal -->
                                <div id="creative-presentation-modal" class="modal hidden">
                                    <div class="modal-content presentation-content">
                                        <h2 id="presentation-artist">Artiste : ???</h2>
                                        <div class="presentation-canvas-container"
                                            style="background: white; border-radius: 8px; overflow: hidden; margin: 10px auto;">
                                            <canvas id="presentation-canvas" width="1600" height="1200"
                                                style="width: 100%; height: auto; display: block;"></canvas>
                                        </div>
                                        <div class="presentation-timer">Prochain dessin dans <span
                                                id="presentation-timer-val">10</span>s</div>
                                    </div>
                                </div>

                                <!-- Creative Voting Modal -->
                                <div id="creative-voting-modal" class="modal hidden">
                                    <div class="modal-content voting-content" style="max-width: 95vw; width: 1400px;">
                                        <h2><i class="fas fa-star"></i> Votez pour vos dessins préférés !</h2>
                                        <div class="voting-timer">Temps restant : <span id="voting-timer-val">60</span>s
                                        </div>
                                        <div id="voting-grid" class="voting-grid"
                                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; max-height: 70vh; overflow-y: auto; padding: 10px;">
                                            <!-- Grid items injected here -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Reference Browser Window -->
                                <div id="reference-browser" class="floating-window hidden">
                                    <div class="window-header" id="browser-header">
                                        <div class="window-title">
                                            <i class="fas fa-images"></i> Images
                                        </div>
                                        <div class="window-controls">
                                            <button id="btn-browser-close" class="window-btn"><i class="fas fa-times"></i></button>
                                        </div>
                                    </div>
                                    <div class="browser-toolbar">
                                        <input type="text" id="browser-url" placeholder="Rechercher une image..." autocomplete="off">
                                        <button id="btn-browser-go" title="Rechercher"><i class="fas fa-search"></i></button>
                                    </div>
                                    <div class="browser-content" id="browser-content">
                                        <div id="image-results-grid" class="image-grid">
                                            <div class="empty-state">Recherchez quelque chose...</div>
                                        </div>
                                    </div>
                                    <div class="browser-status" id="browser-status">
                                        <a href="https://pixabay.com/" target="_blank" style="color: inherit; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 5px;">
                                            Powered by <img src="https://pixabay.com/static/img/logo_square.png" style="height: 16px; vertical-align: middle;"> Pixabay
                                        </a>
                                    </div>
                                </div>
</div>